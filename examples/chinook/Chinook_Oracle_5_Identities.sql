/*******************************************************************************
   Chinook Database - Version 1.4.5
   Script: Chinook_Oracle.sql
   Description: Creates and populates the Chinook database.
   DB Server: Oracle
   Author: Luis Rocha
   License: https://github.com/lerocha/chinook-database/blob/master/LICENSE.md
********************************************************************************/

ALTER SESSION SET current_schema = chinook;
SET FEEDBACK OFF;

/*******************************************************************************
   Fix Identity Columns
********************************************************************************/

DECLARE COUNT_TABLE INT;
BEGIN
	SELECT MAX(ALBUMID) + 1  INTO COUNT_TABLE FROM Album;
	EXECUTE IMMEDIATE 'ALTER TABLE ALBUM MODIFY ALBUMID NUMBER GENERATED BY DEFAULT AS IDENTITY(START WITH '||COUNT_TABLE||')';
    
	SELECT MAX(ARTISTID) + 1  INTO COUNT_TABLE FROM ARTIST;
	EXECUTE IMMEDIATE 'ALTER TABLE ARTIST MODIFY ARTISTID NUMBER GENERATED BY DEFAULT AS IDENTITY(START WITH '||COUNT_TABLE||')';
    
	SELECT MAX(EMPLOYEEID) + 1  INTO COUNT_TABLE FROM EMPLOYEE;
	EXECUTE IMMEDIATE 'ALTER TABLE EMPLOYEE MODIFY EMPLOYEEID NUMBER GENERATED BY DEFAULT AS IDENTITY(START WITH '||COUNT_TABLE||')';
    
	SELECT MAX(GENREID) + 1  INTO COUNT_TABLE FROM GENRE;
	EXECUTE IMMEDIATE 'ALTER TABLE GENRE MODIFY GENREID NUMBER GENERATED BY DEFAULT AS IDENTITY(START WITH '||COUNT_TABLE||')';
    
	SELECT MAX(INVOICEID) + 1  INTO COUNT_TABLE FROM INVOICE;
	EXECUTE IMMEDIATE 'ALTER TABLE INVOICE MODIFY INVOICEID NUMBER GENERATED BY DEFAULT AS IDENTITY(START WITH '||COUNT_TABLE||')';
    
	SELECT MAX(INVOICELINEID) + 1  INTO COUNT_TABLE FROM INVOICELINE;
	EXECUTE IMMEDIATE 'ALTER TABLE INVOICELINE MODIFY INVOICELINEID NUMBER GENERATED BY DEFAULT AS IDENTITY(START WITH '||COUNT_TABLE||')';
    
	SELECT MAX(MEDIATYPEID) + 1  INTO COUNT_TABLE FROM MEDIATYPE;
	EXECUTE IMMEDIATE 'ALTER TABLE MEDIATYPE MODIFY MEDIATYPEID NUMBER GENERATED BY DEFAULT AS IDENTITY(START WITH '||COUNT_TABLE||')';
    
	SELECT MAX(PLAYLISTID) + 1  INTO COUNT_TABLE FROM PLAYLIST;
	EXECUTE IMMEDIATE 'ALTER TABLE PLAYLIST MODIFY PLAYLISTID NUMBER GENERATED BY DEFAULT AS IDENTITY(START WITH '||COUNT_TABLE||')';
    
	SELECT MAX(PLAYLISTTRACKID) + 1  INTO COUNT_TABLE FROM PLAYLISTTRACK;
	EXECUTE IMMEDIATE 'ALTER TABLE PLAYLISTTRACK MODIFY PLAYLISTTRACKID NUMBER GENERATED BY DEFAULT AS IDENTITY(START WITH '||COUNT_TABLE||')';

    SELECT MAX(TRACKID) + 1  INTO COUNT_TABLE FROM TRACK;
	EXECUTE IMMEDIATE 'ALTER TABLE TRACK MODIFY TRACKID NUMBER GENERATED BY DEFAULT AS IDENTITY(START WITH '||COUNT_TABLE||')';
END;